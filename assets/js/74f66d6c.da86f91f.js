"use strict";(self.webpackChunkhippy=self.webpackChunkhippy||[]).push([[3492],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>p});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),c=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},E=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),E=c(t),p=r,m=E["".concat(o,".").concat(p)]||E[p]||u[p]||l;return t?a.createElement(m,i(i({ref:n},d),{},{components:t})):a.createElement(m,i({ref:n},d))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=E;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<l;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}E.displayName="MDXCreateElement"},6241:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var a=t(7462),r=(t(7294),t(3905));const l={},i="MySQL",s={unversionedId:"basic/storage/mysql",id:"basic/storage/mysql",title:"MySQL",description:"SQL \u6267\u884c\u8fc7\u7a0b",source:"@site/docs/basic/02-storage/00-mysql.md",sourceDirName:"basic/02-storage",slug:"/basic/storage/mysql",permalink:"/docs/basic/storage/mysql",draft:!1,editUrl:"https://github.com/prchann/prchann.github.io/tree/main/docs/basic/02-storage/00-mysql.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{},sidebar:"basicSidebar",previous:{title:"\u5b58\u50a8\u4ecb\u8d28",permalink:"/docs/basic/storage/disk"},next:{title:"Redis",permalink:"/docs/basic/storage/redis"}},o={},c=[{value:"\u7d22\u5f15",id:"\u7d22\u5f15",level:2},{value:"\u5b58\u50a8",id:"\u5b58\u50a8",level:2},{value:"MyISAM",id:"myisam",level:2},{value:"InnoDB VS MyISAM",id:"innodb-vs-myisam",level:3},{value:"\u67e5\u8be2\u6027\u80fd\u4f18\u5316",id:"\u67e5\u8be2\u6027\u80fd\u4f18\u5316",level:2},{value:"\u67b6\u6784",id:"\u67b6\u6784",level:2},{value:"\u9ad8\u7ea7\u7279\u6027",id:"\u9ad8\u7ea7\u7279\u6027",level:2},{value:"\u7f13\u5b58\u7ba1\u7406",id:"\u7f13\u5b58\u7ba1\u7406",level:2},{value:"\u6267\u884c\u8ba1\u5212",id:"\u6267\u884c\u8ba1\u5212",level:2},{value:"log",id:"log",level:2},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:2},{value:"\u65e5\u671f\u65f6\u95f4",id:"\u65e5\u671f\u65f6\u95f4",level:3},{value:"SQL",id:"sql",level:2},{value:"Query",id:"query",level:3},{value:"Condition",id:"condition",level:4},{value:"Order",id:"order",level:4},{value:"Limit",id:"limit",level:4},{value:"Group",id:"group",level:4},{value:"Join",id:"join",level:4},{value:"Insert, Update and Delete",id:"insert-update-and-delete",level:3},{value:"Functions",id:"functions",level:3},{value:"Stored Procedures",id:"stored-procedures",level:3},{value:"Advanced",id:"advanced",level:3},{value:"Admin",id:"admin",level:3},{value:"Help",id:"help",level:3},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}],d={toc:c};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"mysql"},"MySQL"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/prchann/fs/main/7fa21ffd21b346eab6be2d64f4186323.jpeg",alt:"SQL \u6267\u884c\u8fc7\u7a0b"})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"SQL \u6267\u884c\u8fc7\u7a0b")),(0,r.kt)("h2",{id:"\u7d22\u5f15"},"\u7d22\u5f15"),(0,r.kt)("h2",{id:"\u5b58\u50a8"},"\u5b58\u50a8"),(0,r.kt)("h2",{id:"myisam"},"MyISAM"),(0,r.kt)("h3",{id:"innodb-vs-myisam"},"InnoDB VS MyISAM"),(0,r.kt)("h2",{id:"\u67e5\u8be2\u6027\u80fd\u4f18\u5316"},"\u67e5\u8be2\u6027\u80fd\u4f18\u5316"),(0,r.kt)("h2",{id:"\u67b6\u6784"},"\u67b6\u6784"),(0,r.kt)("h2",{id:"\u9ad8\u7ea7\u7279\u6027"},"\u9ad8\u7ea7\u7279\u6027"),(0,r.kt)("h2",{id:"\u7f13\u5b58\u7ba1\u7406"},"\u7f13\u5b58\u7ba1\u7406"),(0,r.kt)("h2",{id:"\u6267\u884c\u8ba1\u5212"},"\u6267\u884c\u8ba1\u5212"),(0,r.kt)("h2",{id:"log"},"log"),(0,r.kt)("h2",{id:"\u6570\u636e\u7c7b\u578b"},"\u6570\u636e\u7c7b\u578b"),(0,r.kt)("h3",{id:"\u65e5\u671f\u65f6\u95f4"},"\u65e5\u671f\u65f6\u95f4"),(0,r.kt)("p",null,"\u5efa\u8bae\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"datetime"),"(\u800c\u975e ",(0,r.kt)("inlineCode",{parentName:"p"},"timestamp"),")\uff0c\u5e76\u56fa\u5b9a\u4e3a UTC \u65f6\u95f4\u3002",(0,r.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/409286/should-i-use-the-datetime-or-timestamp-data-type-in-mysql?noredirect=1&lq=1"},"\u53c2\u8003"),"\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u968f\u65f6\u533a\u53d8\u5316\uff0c\u5b58\u50a8\u4e2d\u662f\u4e00\u4e2a\u56fa\u5b9a\u503c\uff08\u5b57\u7b26\u4e32\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u9605\u8bfb\u53cb\u597d"),(0,r.kt)("li",{parentName:"ul"},"\u5bb9\u6613\u8f6c\u6362\u4e3a Unix \u65f6\u95f4\u6233 ",(0,r.kt)("inlineCode",{parentName:"li"},"SELECT UNIX_TIMESTAMP(my_datetime)")),(0,r.kt)("li",{parentName:"ul"},"C \u7aef\u6309\u9700\u8f6c\u6362\u4e3a Locale \u65f6\u95f4")),(0,r.kt)("h2",{id:"sql"},"SQL"),(0,r.kt)("h3",{id:"query"},"Query"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT c1, c2 FROM t;\nSELECT * FROM t;\n\n-- alias column\nSELECT c1 alias1, c2 alias2 FROM t;\n-- alias table\nSELECT a.c1, b.c2 FROM tA a, tB b\nWHERE a.c1 = b.c2;\n\n-- DISTINCT\nSELECT DISTINCT c FROM t;\n")),(0,r.kt)("h4",{id:"condition"},"Condition"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- =, >, <, <=, >=, <>\nSELECT * FROM t1\nWHERE c1 = 'str'\nWHERE c1 > 1\n\n-- BETWEEN AND\n-- begin and end values are included\n-- the values can be numbers, text, or dates\nWHERE c2 BETWEEN 1 AND 2 -- number\nWHERE c2 NOT BETWEEN 'a' AND 'c' -- text\nWHERE c2 BETWEEN #01/01/2020# AND #03/18/2020# -- date\nWHERE c2 BETWEEN '2020-01-01' AND '2020-03-18' -- date\n\n-- LIKE\n-- %: 0, 1, or multiple characters\n-- _: single character\nWHERE c3 LIKE '_b%' -- finds any values that have \"b\" in the second position\n\n-- IN (), NOT IN ()\nWHERE c4 IN ('red', 'green', 'blue')\nWHERE c4 NOT IN ('black', 'orange')\nWHERE c4 IN ( SELECT c4 FROM t2 );\n\n\n-- NULL, NOT NULL\nSELECT * FROM t\nWHERE c1 IS NULL\nWHERE c2 IS NOT NULL\n\n\n-- AND, OR, NOT\nSELECT * FROM t\nWHERE NOT c1 = 'child' OR ( c2 >= 18 AND c2 <= 200 );\n\n\n-- EXISTS\n-- is used to test for the existence of any record in a subquery\n-- returns true if the subquery returns one or more records.\nSELECT `name` FROM suppliers\nWHERE EXISTS (SELECT `name` FROM products WHERE products.supplierId = suppliers.id AND price < 20);\n\n\n-- ANY, ALL\n-- operator must be =, <>, !=, >, >=, <, or <=\nSELECT `name` FROM products\nWHERE `id` = ANY (SELECT productId FROM orders WHERE quantity = 10);\n")),(0,r.kt)("h4",{id:"order"},"Order"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT c1 FROM t\nORDER BY c1 ASC, c2 DESC;\n")),(0,r.kt)("h4",{id:"limit"},"Limit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- row_count\nSELECT c1 FROM t\nLIMIT 15;\n\n-- offset, row_count\nSELECT c1 FROM t\nLIMIT 0, 15;\n")),(0,r.kt)("h4",{id:"group"},"Group"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- often used with aggregate functions (COUNT, MAX, MIN, SUM, AVG) to group the result-set by one or more columns\nSELECT COUNT(c1) c1Count, c2 FROM t\nGROUP BY c2\nORDER BY c1Count;\n\n-- HAVING\n-- used with aggregate functions\nSELECT COUNT(id) customerCount, country FROM customers\nGROUP BY country\nHAVING customerCount > 5\n")),(0,r.kt)("h4",{id:"join"},"Join"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://www.w3schools.com/sql/img_innerjoin.gif",alt:"inner-join"})," ",(0,r.kt)("img",{parentName:"p",src:"https://www.w3schools.com/sql/img_leftjoin.gif",alt:"left-join"})," ",(0,r.kt)("img",{parentName:"p",src:"https://www.w3schools.com/sql/img_rightjoin.gif",alt:"right-join"})," ",(0,r.kt)("img",{parentName:"p",src:"https://www.w3schools.com/sql/img_fulljoin.gif",alt:"full-outer-join"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- INNER JOIN\n-- selects records that have matching values in both tables\nSELECT a.c1, b.c2\nFROM a\nINNER JOIN b ON a.id = b.aId;\n\n-- join three tables\nSELECT a.c1, b.c2, c.c3\nFROM (( a\nINNER JOIN b ON a.id = b.aId )\nINNER JOIN c ON a.id = c.aId );\n\n-- LEFT JOIN\n-- returns all records from the left table (table1), and the matched records from the right table (table2)\n-- the result is NULL from the right side, if there is no match\nSELECT a.c1, b.c2\nFROM a\nLEFT JOIN b ON a.id = b.aId;\n\n-- RIGHT JOIN\nSELECT a.c1, b.c2\nFROM a\nRIGHT JOIN b ON a.id = b.aId;\n\n-- FULL (OUTER) JOIN\n-- returns all records when there is a match in left (table1) or right (table2) table records\nSELECT a.c1, b.c2\nFROM a\nFULL OUTER JOIN b ON a.id = b.aId;\n\n\n-- Self JOIN\n-- is a regular join, but the table is joined with itself\nSELECT a.name customer1, b.name customer2, a.city\nFROM customers a, customers b\nWHERE a.id <> b.id\nAND a.city = b.city\nORDER BY a.city;\n\n\n-- UNION\n-- combine the result-set of two or more SELECT statements\n-- select only *distinct* values by default\nSELECT col FROM a\nUNION\nSELECT col FROM b\n\n-- allow duplicate values\nSELECT c1, c2 FROM a\nUNION ALL\nSELECT c1, c2 FROM b\n")),(0,r.kt)("h3",{id:"insert-update-and-delete"},"Insert, Update and Delete"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- INSERT INTO\nINSERT INTO t\nVALUES (v1, v2, v3); -- make sure the order of the values is in the same order as the columns in the table\n\nINSERT INTO t\nVALUES (NULL, '', v3); -- user NULL or '' to indicate using default value\n\nINSERT INTO t (c1, c5, c3)\nVALUES (v1, v5, v3); -- pay attention to the order of cols and values\n\n\n-- UPDATE\nUPDATE t\nSET c1 = 'str', c3 = 1\nWHERE c1 IS NULL;\n\n\n-- DELETE FROM\nDELETE FROM t\nWHERE c1 = 1;\n")),(0,r.kt)("h3",{id:"functions"},"Functions"),(0,r.kt)("p",null,"Reference to ",(0,r.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/8.0/en/string-functions.html"},"String Functions and Operators"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- MIN(), MAX(), COUNT(), AVG(), SUM()\nSELECT AVG(price) FROM t;\n\n-- CONCAT()\nSELECT CONCAT(addressLine1, ', ', postalCode, ', ', city, ', ', country) AS addressDetail\nFROM t;\n\n-- CHAR_LENGTH()\nSELECT c FROM t\nWHERE CHAR_LENGTH(`name`) < 3\n\n-- REPLACE()\nUPDATE t\nSET c1 = REPLACE(c1, 'from_str', 'to_str')\nWHERE b = 1;\n")),(0,r.kt)("h3",{id:"stored-procedures"},"Stored Procedures"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'-- create a procedure\nCREATE PROCEDURE SelectAllCustomers\nAS\nSELECT * FROM customers\nGO;\n-- execute procedure\nEXEC SelectAllCustomers;\n\n-- create a procedure with parameter\nCREATE PROCEDURE SelectAllCustomers @city nvarchar(30)\nAS\nSELECT * FROM customers WHERE city = @city\nGO;\n-- execute procedure\nEXEC SelectAllCustomers @city = "London";\n')),(0,r.kt)("h3",{id:"advanced"},"Advanced"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- SELECT INTO\n-- copies data from one table into a new table\n-- the new table will be created with the column-names and types as defined in the old table\n-- you can create new column names using the AS clause\nSELECT *\nINTO b IN anotherDb\nFROM a;\n\nSELECT c1, c2\nINTO b\nFROM a;\n\n-- INSERT INTO SELECT\n-- copies data from one table and inserts it into another table\n-- 1. requires that data types in source and target tables match\n-- 2. the existing records in the target table are unaffected\nINSERT INTO b\nSELECT * FROM a;\n\nINSERT INTO b (c1, c2)\nSELECT c1, c2 FROM a;\n\n-- REPLACE INTO SELECT\n-- \u7528\u540e\u8005\u6570\u636e\u66ff\u6362\u524d\u8005\uff08\u5373\uff0c\u7528 6-2 \u66ff\u6362 4.2\uff09\nREPLACE INTO doc_state_info (doc_id, state_id, sub_state_id, content, user_id)\nSELECT doc_id, 4, 2, content, user_id FROM doc_state_info\nWHERE doc_id = 'gl21232025nzhffh' AND state_id = 6 and sub_state_id = 2;\n\n\n-- CASE\n-- if - then - else\n-- once a condition is true, it will stop reading and return the result\n-- if no conditions are true, it returns the value in the ELSE clause\n-- if there is no ELSE part and no conditions are true, it returns NULL\nSELECT c1\nCASE\n  WHEN age > 17 THEN 'adult'\n  WHEN age < 18 THEN 'minor'\n  ELSE ''\nEND AS ageStage\nFROM t;\n\n-- Opearte columns\n-- NULL\nSELECT `name`, unitPrice * (unitsInStock + unitsOnOrder)\nFROM products;\n-- in the example above, if any of the \"unitsOnOrder\" values are NULL, the result will be NULL\nSELECT `name`, unitPrice * (unitsInStock + IFNULL(unitsOnOrder, 0))\nFROM products;\n")),(0,r.kt)("h3",{id:"admin"},"Admin"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- DATABASE\nSHOW DATABASES;\n\nCREATE DATABASE d;\n\nDROP DATABASE d;\n\n-- TABLE\nSHOW TABLES;\n\nDESC t;\nSHOW FULL COLUMNS FROM t;\n\nCREATE TABLE t (\n  c1 type1,\n  c2 type2\n);\n\nDROP TABLE t;\n\n-- Index\nSHOW INDEX FROM t;\n\nALTER TABLE t ADD UNIQUE `uniqueName`(c1, c2, c3);\n\nALTER TABLE t DROP INDEX constraint_name;\nALTER TABLE t DROP INDEX column_name;\n-- If it was defined unique using PRIMARY KEY clause, use:\nALTER TABLE t DROP PRIMARY KEY;\n")),(0,r.kt)("h3",{id:"help"},"Help"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"?\n-- or\nhelp\n")),(0,r.kt)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.w3schools.com/sql/default.asp"},"SQL Tutorial - W3Schools")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://anandarajpandey.com/2015/05/10/mysql-naming-coding-conventions-tips-on-mysql-database/"},"MySQL naming / coding conventions: tips on mySQL database")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://mysqlserverteam.com/mysql-8-0-uuid-support/"},"Mysql 8.0: UUID support"))))}u.isMDXComponent=!0}}]);